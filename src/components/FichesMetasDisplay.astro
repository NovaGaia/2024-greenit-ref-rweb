---
import { getLangFromUrl, useTranslations } from "@i18n/utils";
import MetaItem from "./MetaItem.astro";

type Props = {
  className?: string;
  frontmatter: any;
  tableOfContents: Array<{ depth: number; text: string; slug: string }>;
};

const { className, frontmatter, tableOfContents } = Astro.props;
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<div
  class:list={[
    className,
    `box flex flex-col border-neutral-transparent
        md:flex-row md:flex-wrap md:justify-between md:gap-4
        lg:sticky lg:top-[80px] lg:mt-8 lg:flex-col`,
  ]}
>
  <ul class="my-2 md:mb-0">
    <MetaItem
      frontmatter={frontmatter}
      fontSize="sm"
      meta="environmental_impact"
      displayTitle
    />
    <MetaItem
      frontmatter={frontmatter}
      meta="priority_implementation"
      fontSize="sm"
      displayTitle
    />
    <MetaItem
      frontmatter={frontmatter}
      meta="lifecycle"
      displayTitle
      fontSize="sm"
    />
    <MetaItem
      frontmatter={frontmatter}
      meta="scope"
      displayTitle
      fontSize="sm"
    />
    {/* <MetaItem frontmatter={frontmatter} meta="people" displayTitle /> */}
    {/* <MetaItem frontmatter={frontmatter} meta="state_validation" /> */}
    {/* <MetaItem frontmatter={frontmatter} meta="responsible" /> */}
  </ul>
  <div
    class="border-t-2 border-neutral-transparent md:border-r-2 lg:border-t-2"
  >
  </div>
  <ul class="my-2 md:mb-0">
    <MetaItem
      frontmatter={frontmatter}
      meta="saved_resources"
      displayTitle
      fontSize="sm"
    />
  </ul>
  <div
    class="border-t-2 border-neutral-transparent md:border-r-2 lg:border-r-0"
  >
  </div>
  <div class="my-2 text-sm md:mb-0">
    <p class="mb-0 font-bold">{t("Sommaire :")}</p>
    {
      /*
    <!-- <nav
        aria-label="navigation article"
        class="summary-article"
        dangerouslySetInnerHTML={{ __html: tableOfContents }}
        /> -->
     */
    }
    <nav aria-label="navigation article" class="summary-article">
      <ul>
        {
          tableOfContents.map((h) => {
            return (
              <li>
                {" "}
                <a href={`#${h.slug}`}>{h.text}</a>
              </li>
            );
          })
        }
        <li>
          <a href="#principe-de-validations">{t("Principe de validation")}</a>
        </li>
      </ul>
    </nav>
  </div>
</div>
