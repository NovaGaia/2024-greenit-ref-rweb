---
import { languages } from "../i18n/ui";
import { getLangFromUrl, useTranslatedPath } from "../i18n/utils";

type Props = {
  style: "dark" | "light";
};
const { style } = Astro.props;
const lang = getLangFromUrl(Astro.url);
const translatePath = useTranslatedPath(lang);
---

<label for="lang-select"
  ><span class="sr-only">Language</span>
  <select
    id="lang-select"
    onchange="window.location.href = this.value"
    class:list={[
      "rounded-sm py-1 text-sm",
      {
        "bg-green-600 text-white lg:bg-slate-600 lg:text-white":
          style === "dark",
        "bg-white text-slate-900": style === "light",
      },
    ]}
  >
    {
      Object.entries(languages).map(([language, label]) => (
        <option
          value={translatePath("/", language)}
          selected={language === lang}
        >
          {label}
        </option>
      ))
    }
  </select>
</label>
